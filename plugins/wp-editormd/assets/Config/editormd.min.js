!function(l,d,e,p){var t,i;function r(e,t){var i;switch(t){case"emojify":i=e+"/assets/Emojify.js/images/basic";break;case"katex":i=e+"/assets/KaTeX";break;case"mermaid":i=e+"/assets/Mermaid";break;case"prismjs":i=e+"/assets/Prism.js";break;case"codemirror":i=e+"/assets/CodeMirror";break;case"marked":i=e+"/assets/Marked"}return i}l(d).ready(function(){var i=null;if(d.getElementById("wp-content-editor-container"))i="wp-content-editor-container";else if(d.getElementById("wp-replycontent-editor-container")&&"on"===p.supportReply)i="wp-replycontent-editor-container";else if(d.getElementById("comment")&&"on"===p.supportComment)i="comment",l("#comment").after('<div id="comment"></div>').remove();else{if(""===p.supportOther)return!1;i=p.supportOther,l("#"+p.supportOther).after('<div id="'+p.supportOther+'"></div>').remove()}var e,t=["undo","redo","|","bold","del","italic","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","code-block","table","datetime","off"!==p.emoji?"emoji":"html-entities","more","pagebreak","|","goto-line","watch","preview","fullscreen","clear","search","|","help","info"],r=["bold","del","italic","quote","ucwords","uppercase","lowercase","|","link","reference-link","image","code","code-block","table","datetime","off"!==p.emoji?"emoji":"html-entities","|","watch","preview","fullscreen","clear","info"],o=["ucwords","uppercase","lowercase","|","link","reference-link","image","table","datetime","off"!==p.emoji?"emoji":"html-entities","|","watch","preview","fullscreen","info"];switch(i){case"wp-content-editor-container":e=t;break;case"comment":e=r;break;case"wp-replycontent-editor-container":e=o;break;default:e=t}var c=editormd({id:i,path:p.editormdUrl+"/assets/Editormd/lib/",width:"100%",height:"wp-content-editor-container"===i?640:320,syncScrolling:"off"!==p.syncScrolling,watch:"wp-replycontent-editor-container"!==i&&"off"!==p.livePreview,htmlDecode:"off"!==p.htmlDecode,toolbarAutoFixed:!1,toolbar:!0,autoFocus:"comment"!==i,tocm:!1,tocContainer:"off"!==p.toc&&"",tocDropdown:!1,theme:p.theme,previewTheme:p.previewTheme,editorTheme:p.editorTheme,emoji:"off"!==p.emoji,tex:"katex"===p.tex,mind:"off"!==p.mindMap,mermaid:"off"!==p.mermaid,atLink:!1,taskList:"off"!==p.taskList,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],placeholder:p.placeholderEditor,prismTheme:p.prismTheme,prismLineNumbers:"off"!==p.prismLineNumbers,saveHTMLToTextarea:!0,toolbarIcons:function(){return e},onfullscreen:function(){d.getElementById(i).style.position="fixed",d.getElementById(i).style.zIndex="99999"},onfullscreenExit:function(){d.getElementById(i).style.position="relative",d.getElementById(i).style.zIndex="auto"},onload:function(){if("comment"===i&&l("textarea.editormd-markdown-textarea").attr("name","comment"),"wp-replycontent-editor-container"===i&&l(".reply").click(function(){setTimeout(function(){l(".edit-comments-php .CodeMirror.cm-s-default.CodeMirror-wrap").css("margin-top",l(".editormd-toolbar").height())},100)}),1600===function(){if(this.innerWidth)return this.innerWidth;if(document.documentElement&&document.documentElement.clientWidth)return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth}()){var e=l(".editormd .CodeMirror.CodeMirror-wrap"),t=e.css("margin-top");e.css("margin-top",parseInt(t)-32+"px")}}});if("undefined"!=typeof wp&&void 0!==wp.media){var n=wp.media.editor.insert;wp.media.editor.insert=function(e){if(jQuery(".editormd-container-mask").css("display","block"),new RegExp("(<img .*?>)|(<a ?.*?>.*</a>)").test(e))var t=(new TurndownService).turndown(e);else t=e;n(t),c.insertValue(t),setTimeout(function(){jQuery(".editormd-container-mask").css("display","none")},1e3)}}var a=setInterval(function(){if(wp.utils){var e=l("#wp-word-count").find(".word-count"),t=c.getHTML(),i=(new wp.utils.WordCounter).count(t);e.text(i)}else clearInterval(a)},1e3);"on"===p.imagePaste&&l("#"+i).on("paste",function(e){e=e.originalEvent;var t=window.clipboardData||e.clipboardData,i=window.navigator.userAgent;if(e.clipboardData&&e.clipboardData.items){var o={line:c.getCursor().line,ch:c.getCursor().ch};if(!(t.items&&2===t.items.length&&"string"===t.items[0].kind&&"file"===t.items[1].kind&&t.types&&2===t.types.length&&"text/plain"===t.types[0]&&"Files"===t.types[1]&&i.match(/Macintosh/i)&&Number(i.match(/Chrome\/(\d{2})/i)[1])<49)){var r,n,a,d=t.items.length;if(0!==d)if(1!==d||"string"!==t.items[0].kind)if(1===d&&"file"===t.items[0].kind||2===d&&"file"===t.items[1].kind){if(1===d)var m=t.items[0];else m=t.items[1];var s=m.getAsFile();if(0===s.size)return;r=s,n=function(e){var i="!["+p.imgUploading+"]",r="!["+p.imgUploadeFailed+"]",t={action:"imagepaste_action",dataurl:e};c.insertValue(i),l.ajax({url:ajaxurl,type:"POST",data:t,success:function(e){var t=JSON.parse(e);t.error?c.setValue(c.getValue().replace(i,r)):"on"===p.imageLink?c.setValue(c.getValue().replace(i,"[![]("+t.url+")]("+t.url+")")):c.setValue(c.getValue().replace(i,"![]("+t.url+")")),c.setCursor(o),c.focus()}})},(a=new FileReader).onload=function(e){n(e.target.result)},a.readAsDataURL(r)}}}})}),editormd.codeMirrorURL={url:r(p.editormdUrl,"codemirror")},editormd.markedURL={js:r(p.editormdUrl,"marked")+"/marked.min"},editormd.prismURL={url:r(p.editormdUrl,"prismjs")},editormd.mindMapURL=(t=p.mindMapURL,null!==(i=/\.{1}[a-z]{1,}$/).exec(t)?t.slice(0,i.exec(t).index):t),"on"===p.tex&&(editormd.katexURL={css:r(p.editormdUrl,"katex")+"/katex.min",js:r(p.editormdUrl,"katex")+"/katex.min"}),"on"===p.mermaid&&(editormd.mermaidURL={js:r(p.editormdUrl,"mermaid")+"/mermaid.min"}),"on"===p.emoji&&(editormd.emoji={path:r(p.editormdUrl,"emojify")+"/",ext:".png"})}(window.jQuery,document,window,window.Editormd);